<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>ThinkPrompt - Professional Prompt Library</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background:linear-gradient(135deg,#f1f5f9 0%,#e2e8f0 100%);color:#1e293b;line-height:1.6;font-size:16px;min-height:100vh}
.page-wrapper{max-width:1200px;margin:0 auto;padding:0}
.brand-header{background:linear-gradient(135deg,#0d9488 0%,#14b8a6 100%);padding:8px 16px;box-shadow:0 8px 32px rgba(13,148,136,.3);color:#fff;text-align:center;border-radius:16px 16px 0 0;margin-bottom:0}
.new-logo{width:100%;max-width:250px;height:auto;margin:0 auto 8px;display:block}
.container{max-width:1200px;margin:0 auto;display:flex;flex-direction:column;gap:0}
.card{background:rgba(255,255,255,.95)!important;backdrop-filter:blur(10px)!important;border-radius:0!important;border-left:1px solid rgba(255,255,255,.2)!important;border-right:1px solid rgba(255,255,255,.2)!important;border-top:none!important;border-bottom:none!important;overflow:hidden!important;box-shadow:0 8px 32px rgba(0,0,0,.1)!important;margin:0!important}
.card:last-child{border-bottom:1px solid rgba(255,255,255,.2)!important;border-radius:0 0 16px 16px!important}
.copy-success{position:fixed;top:100px;right:20px;background:#10b981;color:#fff;padding:16px 24px;border-radius:12px;font-size:16px;font-weight:600;z-index:2000;transform:translateX(100%);transition:transform .3s ease;display:flex;align-items:center;gap:12px;box-shadow:0 8px 24px rgba(16,185,129,.4)}
.copy-success.show{transform:translateX(0)}
.modal-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.7);display:flex;align-items:center;justify-content:center;z-index:2000}
.modal-dialog{background:#fff;border-radius:16px;max-width:400px;width:90%;max-height:80vh;overflow-y:auto;box-shadow:0 20px 50px rgba(0,0,0,.3)}
.subsection{}
.subsection-header{background:linear-gradient(135deg,#0d9488,#14b8a6);padding:16px 28px}
.subsection-title{color:#fff;font-family:Impact,'Arial Black',sans-serif;font-size:28px;font-weight:900;letter-spacing:1px;margin:0 0 6px 0;text-align:center;text-shadow:2px 2px 6px rgba(0,0,0,.7)}
.subsection-description{color:#f0fdfa;font-size:13px;font-weight:500;margin:0;opacity:.9}
.starter-tabs-container{background:linear-gradient(135deg,#0d9488,#14b8a6);padding:20px 24px;position:relative}
.starter-tabs{display:grid;grid-template-columns:repeat(auto-fit,minmax(110px,1fr));gap:12px;max-width:900px;margin:0 auto}
.starter-tab{padding:14px 18px;border:2px solid #5eead4;border-radius:10px;background:linear-gradient(135deg,#0d9488,#14b8a6);color:#fff;font-size:15px;font-weight:700;cursor:pointer;transition:all .3s ease;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:10px;min-height:90px;text-align:center;position:relative;overflow:hidden;box-shadow:0 3px 12px rgba(13,148,136,.3)}
.starter-tab svg{width:32px;height:32px}
.starter-tab:hover{border-color:#fff;color:#fff;background:linear-gradient(135deg,#14b8a6,#2dd4bf);transform:translateY(-2px);box-shadow:0 6px 20px rgba(20,184,166,.2)}
.starter-tab.active{background:linear-gradient(135deg,#fff,#f0fdfa);color:#0d9488;border-color:#fff;box-shadow:0 6px 20px rgba(255,255,255,.4);transform:translateY(-2px)}
.templates-header{background:linear-gradient(135deg,#0d9488,#14b8a6)!important;padding:20px 28px;text-align:center;position:relative}
.templates-title{color:#fff!important;font-family:Impact,'Arial Black',sans-serif;font-size:28px;font-weight:900;letter-spacing:1px;text-shadow:2px 2px 6px rgba(0,0,0,.7);margin:0}
.form-textarea{width:100%;padding:16px 18px;border:2px solid #e2e8f0;border-radius:10px;font-size:16px;resize:vertical;transition:all .3s ease;background:rgba(255,255,255,.9);backdrop-filter:blur(10px);font-family:inherit}
.form-textarea.form-select{min-height:60px;resize:none;appearance:none;background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");background-position:right 18px center;background-repeat:no-repeat;background-size:20px;padding-right:50px}
.form-textarea:focus{outline:none;border-color:#14b8a6;box-shadow:0 0 0 3px rgba(20,184,166,.1);background:rgba(255,255,255,.98)}
.welcome-state{padding:60px 24px;text-align:center;color:#64748b}
.welcome-icon{font-size:48px;margin-bottom:20px;opacity:.6}
.welcome-title{font-size:20px;font-weight:700;margin-bottom:8px;color:#374151}
.welcome-text{font-size:14px;line-height:1.5}
.workspace-section{background:rgba(255,255,255,.95);backdrop-filter:blur(10px);border-radius:0 0 16px 16px;border:1px solid rgba(255,255,255,.2);border-top:none;overflow:hidden;box-shadow:0 8px 32px rgba(0,0,0,.1);margin-top:0;display:none}
.workspace-section.show{display:block}
.workspace-title-container{background:linear-gradient(135deg,#0d9488,#14b8a6);padding:20px 28px;text-align:center;position:relative}
.workspace-title-container::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,transparent,#fff,transparent)}
.workspace-title{color:#fff;font-family:Impact,'Arial Black',sans-serif;font-size:28px;font-weight:900;letter-spacing:1px;text-shadow:2px 2px 6px rgba(0,0,0,.7);margin:0}
.workspace-description{color:#f0fdfa;font-size:14px;font-weight:500;margin-top:8px;opacity:.9}
.workspace-actions-container{background:linear-gradient(135deg,#0d9488,#14b8a6);padding:24px;position:relative}
.workspace-actions{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:12px;max-width:900px;margin:0 auto}
.action-btn{padding:14px 18px;border:2px solid #5eead4;border-radius:10px;background:linear-gradient(135deg,#0d9488,#14b8a6);color:#fff;font-size:15px;font-weight:700;cursor:pointer;transition:all .3s ease;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:10px;min-height:90px;text-align:center;position:relative;overflow:hidden;box-shadow:0 3px 12px rgba(13,148,136,.3)}
.action-btn svg{width:32px;height:32px}
.action-btn:hover{border-color:#fff;color:#fff;background:linear-gradient(135deg,#14b8a6,#2dd4bf);transform:translateY(-2px);box-shadow:0 6px 20px rgba(20,184,166,.2)}
.action-btn.primary{background:linear-gradient(135deg,#fff,#f0fdfa);color:#0d9488;border-color:#fff;box-shadow:0 6px 20px rgba(255,255,255,.4);transform:translateY(-2px)}
.workspace-content{padding:32px 28px;min-height:200px;background:#f8fafc}
.prompt-display{width:100%;min-height:300px;padding:20px;border:2px solid #e2e8f0;border-radius:12px;font-size:16px;line-height:1.6;color:#1e293b;background:rgba(255,255,255,.95);backdrop-filter:blur(10px);resize:vertical;white-space:pre-wrap;overflow-y:auto}
.prompt-display:focus{outline:none;border-color:#14b8a6;box-shadow:0 0 0 3px rgba(20,184,166,.1);background:rgba(255,255,255,.95)}
.workspace-empty{text-align:center;padding:60px 24px;color:#64748b}
.workspace-empty-icon{font-size:48px;margin-bottom:20px;opacity:.6}
.workspace-empty-title{font-size:20px;font-weight:700;margin-bottom:8px;color:#374151}
.workspace-empty-text{font-size:14px;line-height:1.5}
.starter-prompt-card{background:#fff;border:1px solid #e2e8f0;border-radius:8px;padding:16px;cursor:pointer;transition:all .2s}
.starter-prompt-card:hover{border-color:#14b8a6;box-shadow:0 4px 12px rgba(20,184,166,.1);transform:translateY(-1px)}
.icon{width:18px;height:18px;stroke:currentColor;fill:none;stroke-width:2.5;stroke-linecap:round;stroke-linejoin:round}
#libraryList{min-height:200px;overflow-y:auto}
.prompt-item{display:flex;align-items:center;padding:12px;border:1px solid #e2e8f0;border-radius:8px;margin-bottom:8px;background:#fff;cursor:pointer;transition:all .2s}
.prompt-item:hover{border-color:#14b8a6;box-shadow:0 2px 8px rgba(20,184,166,.1)}
.prompt-checkbox{margin-right:12px}
.prompt-info{flex:1;cursor:pointer;padding:4px 8px;border-radius:4px;transition:background-color .2s}
.prompt-info:hover{background-color:rgba(20,184,166,.05)}
.prompt-title{font-weight:600;color:#1e293b}
.prompt-date{font-size:12px;color:#64748b;margin-top:4px}
</style>
</head>
<body>
<div class="page-wrapper">
  <div class="copy-success" id="copySuccess">
    <svg class="icon" viewBox="0 0 24 24"><polyline points="20,6 9,17 4,12"></polyline></svg>
    Copied to clipboard!
  </div>

  <header class="brand-header">
    <svg class="new-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 950 240">
      <defs>
        <linearGradient id="g" x1="0" y1="0" x2="0" y2="1">
          <stop offset="0%" stop-color="#fff"/><stop offset="100%" stop-color="#f0fdfa"/>
        </linearGradient>
        <filter id="s"><feDropShadow dx="2" dy="2" stdDeviation="4" flood-color="#000" flood-opacity=".7"/></filter>
      </defs>
      <g transform="translate(20,20)scale(1.08)" stroke="#fff" stroke-width="6" fill="none">
        <path d="M64 16C44 16,28 32,28 52c0 14,9 26,20 32v10h32v-10c11-6,20-18,20-32C100 32,84 16,64 16Z"/>
        <path d="M64 56l-10 12M64 56l10 12M64 56v16"/><line x1="46" y1="100" x2="82" y2="100"/>
        <line x1="48" y1="112" x2="80" y2="112"/><line x1="52" y1="124" x2="76" y2="124"/>
      </g>
      <text x="180" y="100" font-family="Impact" font-size="88" font-weight="900" fill="#fff" style="text-shadow:2px 2px 6px rgba(0,0,0,.7)">ThinkPrompt</text>
      <text x="180" y="180" font-family="Impact" font-size="88" font-weight="900" fill="#fff" style="text-shadow:2px 2px 6px rgba(0,0,0,.7)">UNIVERSAL LIBRARY</text>
    </svg>
  </header>

  <div class="container">
    <section class="card">
      <div class="subsection">
        <div class="subsection-header">
          <h3 class="subsection-title">BROWSE LIBRARY BY CATEGORIES</h3>
        </div>
        <div class="starter-tabs-container">
          <div class="starter-tabs">
            <button class="starter-tab" data-category="favorites">
              <svg class="icon" viewBox="0 0 24 24">
                <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
              </svg>
              Favorites
            </button>
            <button class="starter-tab" data-category="business">
              <svg class="icon" viewBox="0 0 24 24"><path d="M2 20h20"></path><path d="M5 20V9l5-5 5 5v11"></path><path d="M9 9v11"></path><path d="M15 9v11"></path></svg>
              Business
            </button>
            <button class="starter-tab" data-category="career">
              <svg class="icon" viewBox="0 0 24 24"><rect height="14" rx="2" ry="2" width="20" x="2" y="7"></rect><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path></svg>
              Career
            </button>
            <button class="starter-tab" data-category="creative">
              <svg class="icon" viewBox="0 0 24 24"><path d="M12 19l7-7 3 3-7 7-3-3z"></path><path d="m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"></path><path d="m2 2 7.586 7.586"></path><circle cx="11" cy="11" r="2"></circle></svg>
              Creative
            </button>
            <button class="starter-tab" data-category="support">
              <svg class="icon" viewBox="0 0 24 24"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg>
              Support
            </button>
            <button class="starter-tab" data-category="data">
              <svg class="icon" viewBox="0 0 24 24"><line x1="12" y1="20" x2="12" y2="10"></line><line x1="18" y1="20" x2="18" y2="4"></line><line x1="6" y1="20" x2="6" y2="16"></line></svg>
              Data
            </button>
            <button class="starter-tab" data-category="education">
              <svg class="icon" viewBox="0 0 24 24"><path d="M22 10v6M2 10l10-5 10 5-10 5z"></path><path d="M6 12v5c3 3 9 3 12 0v-5"></path></svg>
              Education
            </button>
            <button class="starter-tab" data-category="email">
              <svg class="icon" viewBox="0 0 24 24"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg>
              Email
            </button>
            <button class="starter-tab" data-category="social">
              <svg class="icon" viewBox="0 0 24 24"><circle cx="18" cy="5" r="3"></circle><circle cx="6" cy="12" r="3"></circle><circle cx="18" cy="19" r="3"></circle><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line></svg>
              Social
            </button>
            <button class="starter-tab" data-category="technical">
              <svg class="icon" viewBox="0 0 24 24"><polyline points="16,18 22,12 16,6"></polyline><polyline points="8,6 2,12 8,18"></polyline></svg>
              Technical
            </button>
            <button class="starter-tab" data-category="video">
              <svg class="icon" viewBox="0 0 24 24"><polygon points="23 7 16 12 23 17 23 7"></polygon><rect height="14" rx="2" ry="2" width="15" x="1" y="5"></rect></svg>
              Video
            </button>
            <button class="starter-tab" data-category="misc">
              <svg class="icon" viewBox="0 0 24 24"><circle cx="12" cy="12" r="1"></circle><circle cx="19" cy="12" r="1"></circle><circle cx="5" cy="12" r="1"></circle></svg>
              Miscellaneous
            </button>
          </div>
        </div>
      </div>
    </section>

    <section class="card" id="librarySection">
      <div class="workspace-title-container">
        <h2 class="workspace-title">LIBRARY</h2>
      </div>
      <div class="workspace-actions-container">
        <div class="workspace-actions">
          <button class="action-btn primary" onclick="loadPromptPack()">
            <svg class="icon" viewBox="0 0 24 24"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17,10 12,15 7,10"/><line x1="12" x2="12" y1="15" y2="3"/></svg>
            Load Prompt Pack
          </button>
          <button class="action-btn primary" onclick="backupLibrary()">
            <svg class="icon" viewBox="0 0 24 24"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7,10 12,15 17,10"/><line x1="12" x2="12" y1="15" y2="3"/></svg>
            Backup Library
          </button>
          <button class="action-btn primary" onclick="addSinglePrompt()">
            <svg class="icon" viewBox="0 0 24 24" style="width:24px;height:24px;stroke-width:3"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
            Add Prompt
          </button>
        </div>
      </div>
      <div style="display:grid; grid-template-columns:35% 65%; min-height:600px; border-top:1px solid #e2e8f0;">
        <div style="padding:24px; border-right:1px solid #e2e8f0; display:flex; flex-direction:column; overflow:hidden;">
          <input type="text" class="form-textarea" id="librarySearch" placeholder="Search..." style="margin-bottom:16px; min-height:50px; flex-shrink:0;"/>
          <button class="action-btn" id="deleteSelected" style="background:#ef4444;border-color:#ef4444;color:#fff;margin-bottom:20px; flex-shrink:0;">
            <svg class="icon" viewBox="0 0 24 24" style="color:#fff"><polyline points="3,6 5,6 21,6"></polyline><path d="m19,6v14a2,2 0 0,1 -2,2H7a2,2 0 0,1 -2,-2V6m3,0V4a2,2 0 0,1 2,-2h4a2,2 0 0,1 2,2v2"></path><line x1="10" x2="10" y1="11" y2="17"></line><line x1="14" x2="14" y1="11" y2="17"></line></svg>
            Delete Selected
          </button>
          <div id="libraryList" style="overflow-y:auto; flex:1;"></div>
        </div>
        <div style="padding:24px; display:flex; flex-direction:column; overflow:hidden;">
          <div style="display:flex; gap:8px; margin-bottom:16px; flex-wrap:wrap; flex-shrink:0;">
            <button class="action-btn" onclick="copyPrompt()" style="flex:1; min-width:100px;">
              <svg class="icon" viewBox="0 0 24 24"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="m4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg>
              Copy
            </button>
            <button class="action-btn" onclick="editPrompt()" style="flex:1; min-width:100px;">
              <svg class="icon" viewBox="0 0 24 24"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>
              Edit
            </button>
            <button class="action-btn" onclick="exportPrompt()" style="flex:1; min-width:100px;">
              <svg class="icon" viewBox="0 0 24 24"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7,10 12,15 17,10"/><line x1="12" x2="12" y1="15" y2="3"/></svg>
              Export
            </button>
            <button class="action-btn" id="updateCurrentBtn" onclick="updateCurrent()" style="flex:1; min-width:100px;opacity:0.5;cursor:not-allowed">
              <svg class="icon" viewBox="0 0 24 24"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17,21 17,13 7,13 7,21"/><polyline points="7,3 7,8 15,8"/></svg>
              Update Current
            </button>
            <button class="action-btn" onclick="saveAsNew()" style="flex:1; min-width:100px;">
              <svg class="icon" viewBox="0 0 24 24"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17,21 17,13 7,13 7,21"/><polyline points="7,3 7,8 15,8"/></svg>
              Save As New
            </button>
          </div>
          <div class="prompt-display" id="promptDisplay" contenteditable="true" style="flex:1; overflow-y:auto;">
            <div class="workspace-empty">
              <div class="workspace-empty-icon">💭</div>
              <h3 class="workspace-empty-title">No Prompt Selected</h3>
              <p class="workspace-empty-text">Click any prompt to view and edit it here.</p>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>
</div>

<div class="modal-overlay" id="addPromptOverlay" style="display:none">
  <div class="modal-dialog">
    <div class="workspace-title-container">
      <h2 class="workspace-title">ADD NEW PROMPT</h2>
      <button onclick="closeAddPromptModal()" style="position:absolute;top:20px;right:20px;background:none;border:none;color:#fff;font-size:24px;cursor:pointer">&times;</button>
    </div>
    <div style="padding:32px">
      <div style="margin-bottom:16px">
        <label style="display:block;font-weight:600;margin-bottom:8px">Title *</label>
        <input type="text" id="newPromptTitle" placeholder="Title..." class="form-textarea" style="min-height:60px;resize:none">
      </div>
      <div style="margin-bottom:16px">
        <label style="display:block;font-weight:600;margin-bottom:8px">Category *</label>
        <select id="newPromptCategory" class="form-textarea form-select">
          <option value="">Choose...</option>
          <option value="business">Business</option>
          <option value="career">Career</option>
          <option value="creative">Creative</option>
          <option value="support">Support</option>
          <option value="data">Data</option>
          <option value="education">Education</option>
          <option value="email">Email</option>
          <option value="social">Social</option>
          <option value="technical">Technical</option>
          <option value="video">Video</option>
          <option value="misc">Miscellaneous</option>
        </select>
      </div>
      <div style="margin-bottom:24px">
        <label style="display:block;font-weight:600;margin-bottom:8px">Content *</label>
        <textarea id="newPromptContent" placeholder="Paste prompt..." class="form-textarea" style="height:200px"></textarea>
      </div>
      <div style="display:flex;gap:12px;justify-content:flex-end">
        <button onclick="closeAddPromptModal()" style="padding:12px 24px;border:1px solid #d1d5db;background:#fff;color:#374151;border-radius:8px;cursor:pointer">Cancel</button>
        <button onclick="saveNewPrompt()" class="action-btn primary" style="padding:12px 24px;border-radius:8px">Add</button>
      </div>
    </div>
  </div>
</div>

<div class="modal-overlay" id="saveModalOverlay" style="display:none">
  <div class="modal-dialog">
    <div class="workspace-title-container">
      <h2 class="workspace-title">Save Prompt</h2>
      <button onclick="closeSaveModal()" style="position:absolute;top:20px;right:20px;background:none;border:none;color:#fff;font-size:24px;cursor:pointer">&times;</button>
    </div>
    <div style="padding:32px">
      <div style="margin-bottom:16px">
        <label style="display:block;font-weight:600;margin-bottom:8px">Title *</label>
        <input type="text" id="saveTitle" placeholder="Title..." class="form-textarea" style="min-height:60px;resize:none">
      </div>
      <div style="margin-bottom:24px">
        <label style="display:block;font-weight:600;margin-bottom:8px">Description</label>
        <textarea id="saveDescription" placeholder="Optional..." class="form-textarea" style="height:80px"></textarea>
      </div>
      <div style="display:flex;gap:12px;justify-content:flex-end">
        <button onclick="closeSaveModal()" style="padding:12px 24px;border:1px solid #d1d5db;background:#fff;color:#374151;border-radius:8px;cursor:pointer">Cancel</button>
        <button onclick="confirmSave()" class="action-btn primary" style="padding:12px 24px;border-radius:8px">Save</button>
      </div>
    </div>
  </div>
</div>

<div class="modal-overlay" id="exportModalOverlay" style="display:none">
  <div class="modal-dialog">
    <div class="workspace-title-container">
      <h2 class="workspace-title">Export Prompt</h2>
      <button onclick="closeExportModal()" style="position:absolute;top:20px;right:20px;background:none;border:none;color:#fff;font-size:24px;cursor:pointer">&times;</button>
    </div>
    <div style="padding:32px">
      <div style="margin-bottom:24px">
        <label style="display:block;font-weight:600;margin-bottom:8px">Filename *</label>
        <input type="text" id="exportFilename" placeholder="my-prompt" class="form-textarea" style="min-height:60px;resize:none">
        <p style="font-size:12px;color:#64748b;margin-top:8px">.txt will be added automatically</p>
      </div>
      <div style="display:flex;gap:12px;justify-content:flex-end">
        <button onclick="closeExportModal()" style="padding:12px 24px;border:1px solid #d1d5db;background:#fff;color:#374151;border-radius:8px;cursor:pointer">Cancel</button>
        <button onclick="confirmExport()" class="action-btn primary" style="padding:12px 24px;border-radius:8px">Export</button>
      </div>
    </div>
  </div>
</div>

<div class="modal-overlay" id="updateModalOverlay" style="display:none">
  <div class="modal-dialog">
    <div class="workspace-title-container">
      <h2 class="workspace-title">Update Prompt</h2>
      <button onclick="closeUpdateModal()" style="position:absolute;top:20px;right:20px;background:none;border:none;color:#fff;font-size:24px;cursor:pointer">&times;</button>
    </div>
    <div style="padding:32px">
      <p id="updateMessage" style="font-size:16px;margin-bottom:24px;color:#374151;text-align:center"></p>
      <div style="display:flex;gap:12px;justify-content:flex-end">
        <button onclick="closeUpdateModal()" style="padding:12px 24px;border:1px solid #d1d5db;background:#fff;color:#374151;border-radius:8px;cursor:pointer">Cancel</button>
        <button onclick="confirmUpdate()" class="action-btn primary" style="padding:12px 24px;border-radius:8px">Update</button>
      </div>
    </div>
  </div>
</div>

<div class="modal-overlay" id="deleteModalOverlay" style="display:none">
  <div class="modal-dialog">
    <div class="workspace-title-container" style="background:linear-gradient(135deg,#ef4444,#dc2626)">
      <h2 class="workspace-title">DELETE PROMPTS</h2>
      <button onclick="closeDeleteModal()" style="position:absolute;top:20px;right:20px;background:none;border:none;color:#fff;font-size:24px;cursor:pointer">&times;</button>
    </div>
    <div style="padding:32px">
      <p id="deleteMessage" style="font-size:16px;margin-bottom:24px;color:#374151;text-align:center"></p>
      <div style="display:flex;gap:12px;justify-content:flex-end">
        <button onclick="closeDeleteModal()" style="padding:12px 24px;border:1px solid #d1d5db;background:#fff;color:#374151;border-radius:8px;cursor:pointer">Cancel</button>
        <button onclick="confirmDelete()" style="padding:12px 24px;border:none;background:#ef4444;color:#fff;border-radius:8px;cursor:pointer;font-weight:600">Delete</button>
      </div>
    </div>
  </div>
</div>

<script>
const PROMPTS={};
let currentLoadedPromptId=null;

function initializeFavorites(){const savedPrompts=JSON.parse(localStorage.getItem('thinkprompt_saved')||'[]');let updated=false;savedPrompts.forEach(prompt=>{if(prompt.favorite===undefined){prompt.favorite=false;updated=true}});if(updated){localStorage.setItem('thinkprompt_saved',JSON.stringify(savedPrompts))}}
function toggleFavorite(id){const savedPrompts=JSON.parse(localStorage.getItem('thinkprompt_saved')||'[]');const prompt=savedPrompts.find(p=>p.id==id);if(!prompt)return;prompt.favorite=!prompt.favorite;localStorage.setItem('thinkprompt_saved',JSON.stringify(savedPrompts));const searchTerm=document.getElementById('librarySearch').value;const activeTab=document.querySelector('.starter-tab.active');const currentCategory=activeTab?activeTab.dataset.category:'';renderPromptsList(searchTerm,currentCategory)}
function loadSystemPrompts(){localStorage.setItem('thinkprompt_saved',JSON.stringify([]))}
function showCopySuccess(msg){const el=document.getElementById('copySuccess');el.textContent=msg;el.classList.add('show');setTimeout(()=>el.classList.remove('show'),3000)}
function saveAsNew(){const text=(document.getElementById('promptDisplay').textContent||'').trim();if(!text){alert('No prompt to save.');return}document.getElementById('saveModalOverlay').style.display='flex';document.getElementById('saveTitle').focus()}
function updateCurrent(){if(!currentLoadedPromptId){alert('No prompt loaded.');return}const savedPrompts=JSON.parse(localStorage.getItem('thinkprompt_saved')||'[]');const prompt=savedPrompts.find(p=>p.id==currentLoadedPromptId);if(!prompt){alert('Prompt not found.');return}document.getElementById('updateMessage').textContent=`Are you sure you want to update "${prompt.title}" with your changes?`;document.getElementById('updateModalOverlay').style.display='flex'}
function closeUpdateModal(){document.getElementById('updateModalOverlay').style.display='none'}
function confirmUpdate(){const savedPrompts=JSON.parse(localStorage.getItem('thinkprompt_saved')||'[]');const prompt=savedPrompts.find(p=>p.id==currentLoadedPromptId);if(!prompt){alert('Prompt not found.');return}const text=document.getElementById('promptDisplay').textContent.trim();prompt.content=text;localStorage.setItem('thinkprompt_saved',JSON.stringify(savedPrompts));closeUpdateModal();showCopySuccess('Prompt updated!');renderPromptsList('','')}
function closeSaveModal(){document.getElementById('saveModalOverlay').style.display='none';document.getElementById('saveTitle').value='';document.getElementById('saveDescription').value=''}
function confirmSave(){const title=document.getElementById('saveTitle').value.trim();if(!title){alert('Please enter a title.');return}const savedPrompts=JSON.parse(localStorage.getItem('thinkprompt_saved')||'[]');if(savedPrompts.some(p=>p.title.toLowerCase()===title.toLowerCase())){alert('Title already exists.');return}const text=document.getElementById('promptDisplay').textContent.trim();savedPrompts.push({id:Date.now(),title,description:document.getElementById('saveDescription').value.trim(),content:text,created:new Date().toLocaleDateString(),timestamp:new Date().toISOString(),favorite:false});localStorage.setItem('thinkprompt_saved',JSON.stringify(savedPrompts));closeSaveModal();showCopySuccess('Saved!')}
function addSinglePrompt(){document.getElementById('newPromptTitle').value='';document.getElementById('newPromptCategory').value='';document.getElementById('newPromptContent').value='';document.getElementById('addPromptOverlay').style.display='flex'}
function closeAddPromptModal(){document.getElementById('addPromptOverlay').style.display='none'}
function backupLibrary(){const savedPrompts=JSON.parse(localStorage.getItem('thinkprompt_saved')||'[]');if(savedPrompts.length===0){alert('No prompts to backup.');return}const backup=JSON.stringify(savedPrompts,null,2);const blob=new Blob([backup],{type:'application/json'});const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download=`thinkprompt-library-backup-${new Date().toISOString().split('T')[0]}.json`;document.body.appendChild(a);a.click();document.body.removeChild(a);URL.revokeObjectURL(url);showCopySuccess('Library backed up!')}
function loadPromptPack(){const input=document.createElement('input');input.type='file';input.accept='.json,application/json';input.onchange=e=>{const file=e.target.files[0];if(!file)return;const reader=new FileReader();reader.onload=event=>{try{const imported=JSON.parse(event.target.result);if(!Array.isArray(imported)){alert('Invalid prompt pack format.');return}const existing=JSON.parse(localStorage.getItem('thinkprompt_saved')||'[]');const combined=[...existing,...imported];localStorage.setItem('thinkprompt_saved',JSON.stringify(combined));showCopySuccess(`Loaded ${imported.length} prompts!`)}catch(err){alert('Error loading prompt pack: '+err.message)}};reader.readAsText(file)};input.click()}
function saveNewPrompt(){const title=document.getElementById('newPromptTitle').value.trim();const category=document.getElementById('newPromptCategory').value;const content=document.getElementById('newPromptContent').value.trim();if(!title||!category||!content){alert('All fields required.');return}const savedPrompts=JSON.parse(localStorage.getItem('thinkprompt_saved')||'[]');if(savedPrompts.some(p=>p.title.toLowerCase()===title.toLowerCase())){alert('Title exists.');return}savedPrompts.push({id:Date.now(),title,category,content,created:new Date().toLocaleDateString(),timestamp:new Date().toISOString(),author:'You',favorite:false});localStorage.setItem('thinkprompt_saved',JSON.stringify(savedPrompts));closeAddPromptModal();showCopySuccess('Added!');renderPromptsList('','')}
function showLibrary(categoryFilter=''){const categoryNames={'favorites':'Favorites','business':'Business','career':'Career','creative':'Creative','support':'Support','data':'Data','education':'Education','email':'Email','social':'Social','technical':'Technical','video':'Video','misc':'Miscellaneous'};const titleText=categoryFilter?`LIBRARY - ${categoryNames[categoryFilter]}`:'LIBRARY';document.querySelector('#librarySection .workspace-title').textContent=titleText;renderPromptsList('',categoryFilter)}
function renderPromptsList(searchTerm='',categoryFilter=''){const savedPrompts=JSON.parse(localStorage.getItem('thinkprompt_saved')||'[]');const list=document.getElementById('libraryList');if(savedPrompts.length===0){list.innerHTML='<div style="text-align:center;padding:40px;color:#64748b"><div style="font-size:48px">📂</div><h3>No prompts yet</h3></div>';return}let filtered=savedPrompts.filter(p=>p.title.toLowerCase().includes(searchTerm.toLowerCase())||p.content.toLowerCase().includes(searchTerm.toLowerCase()));if(categoryFilter==='favorites'){filtered=filtered.filter(p=>p.favorite===true)}else if(categoryFilter){filtered=filtered.filter(p=>p.category===categoryFilter)}if(filtered.length===0){list.innerHTML='<div style="text-align:center;padding:40px;color:#64748b"><h3>No prompts in this category</h3></div>';return}list.innerHTML=filtered.map(p=>`<div class="prompt-item"><div onclick="event.stopPropagation()"><input type="checkbox" class="prompt-checkbox" data-prompt-id="${p.id}"></div><div class="prompt-info" onclick="loadPromptFromLibrary('${p.id}')"><div style="display: flex; align-items: center; gap: 8px;"><span onclick="event.stopPropagation(); toggleFavorite('${p.id}')" style="cursor: pointer; font-size: 18px; user-select: none;">${p.favorite?'★':'☆'}</span><div style="flex: 1;"><div class="prompt-title">${p.title}</div><div class="prompt-date">${p.created}</div></div></div></div></div>`).join('')}
function loadPromptFromLibrary(id){const savedPrompts=JSON.parse(localStorage.getItem('thinkprompt_saved')||'[]');const prompt=savedPrompts.find(p=>p.id==id);if(!prompt){alert('Not found.');return}const display=document.getElementById('promptDisplay');display.innerHTML='';const pre=document.createElement('pre');pre.style.whiteSpace='pre-wrap';pre.style.fontFamily='inherit';pre.style.margin='0';pre.textContent=prompt.content;display.appendChild(pre);currentLoadedPromptId=id;const updateBtn=document.getElementById('updateCurrentBtn');updateBtn.style.opacity='1';updateBtn.style.cursor='pointer'}
function deleteSelectedPrompts(){const checkboxes=document.querySelectorAll('.prompt-checkbox:checked');const selectedIds=Array.from(checkboxes).map(cb=>cb.dataset.promptId);if(selectedIds.length===0){alert('No prompts selected.');return}const count=selectedIds.length;document.getElementById('deleteMessage').textContent=`Are you sure you want to delete ${count} selected prompt${count>1?'s':''}? This cannot be undone.`;document.getElementById('deleteModalOverlay').style.display='flex'}
function closeDeleteModal(){document.getElementById('deleteModalOverlay').style.display='none'}
function confirmDelete(){const checkboxes=document.querySelectorAll('.prompt-checkbox:checked');const selectedIds=Array.from(checkboxes).map(cb=>cb.dataset.promptId);const savedPrompts=JSON.parse(localStorage.getItem('thinkprompt_saved')||'[]');const remaining=savedPrompts.filter(p=>!selectedIds.includes(p.id.toString()));localStorage.setItem('thinkprompt_saved',JSON.stringify(remaining));closeDeleteModal();renderPromptsList('','');showCopySuccess('Deleted!')}
function copyPrompt(){const text=document.getElementById('promptDisplay').textContent.trim();if(text){navigator.clipboard.writeText(text).then(()=>showCopySuccess('Copied to clipboard!'))}else{alert('No prompt to copy.')}}
function editPrompt(){document.getElementById('promptDisplay').focus();alert('You can now edit the prompt.')}
function exportPrompt(){const text=document.getElementById('promptDisplay').textContent;if(text&&text.trim()){document.getElementById('exportFilename').value='thinkprompt-'+new Date().toISOString().split('T')[0];document.getElementById('exportModalOverlay').style.display='flex';document.getElementById('exportFilename').focus()}else{alert('No prompt to export.')}}
function closeExportModal(){document.getElementById('exportModalOverlay').style.display='none';document.getElementById('exportFilename').value=''}
function confirmExport(){const filename=document.getElementById('exportFilename').value.trim();if(!filename){alert('Please enter a filename.');return}const text=document.getElementById('promptDisplay').textContent.trim();const blob=new Blob([text],{type:'text/plain'});const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download=`${filename}.txt`;document.body.appendChild(a);a.click();document.body.removeChild(a);URL.revokeObjectURL(url);closeExportModal();showCopySuccess('Exported!')}
function switchStarter(filter){showLibrary(filter);document.querySelectorAll('.starter-tab').forEach(t=>t.classList.remove('active'));document.querySelector(`[data-category="${filter}"]`).classList.add('active')}
document.addEventListener('DOMContentLoaded',()=>{initializeFavorites();loadSystemPrompts();document.querySelectorAll('.starter-tab').forEach(tab=>{tab.addEventListener('click',()=>switchStarter(tab.dataset.category))});document.getElementById('librarySearch').addEventListener('input',e=>renderPromptsList(e.target.value));document.getElementById('deleteSelected').addEventListener('click',deleteSelectedPrompts);document.querySelectorAll('.starter-tab').forEach(t=>t.classList.remove('active'))});
</script>
</body>
</html>